@import './fonts.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global root settings */
:root {
  scroll-behavior: smooth;
  /* navigation sizing */
  --nav-height: 64px; /* default nav height */
  /* UI tokens */
  --ui-duration: 200ms;
  --ui-ease: cubic-bezier(.2,.9,.2,1);
}

/* === Responsive header & spacing refinements === */

/* Mobile header: brand left, subtitle below, controls right */
@media (max-width: 1199px) {
  .mobile-nav .max-w-7xl {
    display: flex;
    align-items: center;
    justify-content: space-between !important;
    gap: 12px;
  }

  .mobile-nav .brand-stack {
    display: flex;
    flex-direction: column;
    gap: 2px;
    align-items: flex-start !important;
    text-align: left !important;
  }

  .mobile-nav .sidebar-subtitle {
    font-size: 14px;
    color: var(--muted);
    opacity: 0.95;
  }

  /* Make sure main content sits below the mobile nav cleanly */
  .main-content {
    padding-top: calc(var(--nav-height) + 12px) !important;
  }

  /* Reduce vertical gap under 'My Stack' heading */
  .content-column h4 {
    margin-bottom: 10px;
  }
}

/* Hide the spotlight toggle in the navbar for touch/tablet screens where mouse isn't available */
@media (max-width: 1199px) {
  .navbar-spotlight { display: none !important; }
}


/* Ensure mobile nav is visible and behaves like a header on small screens */
@media (max-width: 1199px) {
  .mobile-nav { display: flex !important; }
  .mobile-nav .max-w-7xl { width: 100%; }
  .mobile-nav .brand-stack a, .mobile-nav .brand-stack { width: auto; }
}

/* Footer alignment: ensure footer content lines up with header/content-column */
.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
    gap: 12px;
}

/* Footer visibility: keep above background and not hidden by sidebar */
.main-content .footer-content { position: relative; z-index: 20 }

/* Footer helper: use a lightweight container for footer so it doesn't inherit
   the main-content min-height (which caused large empty scroll space). */
.footer-main {
  box-sizing: border-box;
  margin-left: var(--sidebar-width, 18rem);
  padding-left: 24px;
  padding-right: 24px;
  padding-top: 12px;
  padding-bottom: 12px;
  display: block;
  width: calc(100% - var(--sidebar-width, 18rem));
}

.has-collapsed-sidebar .footer-main { margin-left: 72px !important; width: calc(100% - 72px); }
.has-expanded-sidebar .footer-main { margin-left: 18rem !important; width: calc(100% - 18rem); }

/* Mobile: sidebar is hidden, make footer full-width and use standard page padding */
@media (max-width: 1199px) {
  .footer-main,
  .has-collapsed-sidebar .footer-main,
  .has-expanded-sidebar .footer-main {
    margin-left: 0 !important;
    width: 100% !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  /* align footer-content better on narrow screens */
  .footer-content { flex-direction: column; gap: 6px; align-items: flex-start; }
}

  /* Keep dotted line consistent */
  .dotted-line { border-top: 2px dotted var(--border); margin: 0; }

  /* Section dividers: when used inside page content (content-column / page-pad)
     ensure consistent vertical spacing. Footer dotted-line intentionally left
     without large margins so it hugs the footer. */
  .content-column .dotted-line,
  .page-pad .dotted-line {
    margin: var(--dotted-gap, 3rem) 0;
    border-top-width: 2px;
  }

  /* Slightly tighter spacing on smaller screens */
  @media (max-width: 640px) {
    .content-column .dotted-line,
    .page-pad .dotted-line {
      margin: calc(var(--dotted-gap, 3rem) / 1.6) 0; /* ~1.875rem */
      border-top-width: 1px;
    }
  }

  /* Move the dotted-line down specifically when it directly follows a CTA row
     (commonly used on the Home page). This ensures the divider sits evenly under
     the primary CTA cluster across all breakpoints. */
  .content-column .flex + .dotted-line {
    margin-top: 3.5rem; /* slightly larger gap under CTAs */
    margin-bottom: 2.5rem;
  }

  @media (max-width: 640px) {
    .content-column .flex + .dotted-line {
      margin-top: 2.25rem;
      margin-bottom: 1.75rem;
    }
  }

/* Slightly tighter spacing across sections for visual balance */
.content-column { gap: 0.5rem; }

/* Utility: allow pages to center the content column regardless of sidebar state */
.content-column.centered,
.has-expanded-sidebar .content-column.centered,
.has-collapsed-sidebar .content-column.centered {
  margin-left: auto !important;
  margin-right: auto !important;
}

/* === FIX: Prevent expanded cards/panels from causing horizontal overflow === */

/* Ensure all inner panels respect parent width and don't force horizontal growth */
.content-column > * {
  box-sizing: border-box;
  max-width: 100%;
}

/* Work/Experience cards: prevent expanded content from pushing parent width */
.content-column .space-y-4 > * {
  box-sizing: border-box;
  max-width: 100%;
  overflow-x: hidden;
}

/* TiltCard components should never cause overflow */
.content-column .rounded-2xl {
  box-sizing: border-box;
  max-width: 100%;
  overflow-x: hidden;
}

/* Ensure text inside expanded panels wraps properly */
.content-column .px-6,
.content-column .pb-6,
.content-column .p-6 {
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  box-sizing: border-box;
}

/* About page specific: ensure stat cards grid doesn't overflow */
.about-page .grid {
  box-sizing: border-box;
  max-width: 100%;
}

/* === FIX: Make About page container expand to full width when sidebar collapsed === */

/* When sidebar is collapsed, About page should fill remaining viewport width just like other pages */
.has-collapsed-sidebar .main-content .about-page {
  max-width: none !important;
  width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Also ensure the parent motion.main respects full width */
.has-collapsed-sidebar .main-content > .page-pad {
  max-width: none !important;
  width: 100% !important;
}


  /* allow horizontal scrolling when necessary (user can optionally scroll left/right) */
  html, body, #root {
    /* make sure the root/html layer uses the same theme-aware background as the body
       so when the page is scrolled or the centered content doesn't fill the viewport
       the area behind always matches the active theme (no white stripe). */
    min-height: 100%;
    height: 100%;
    margin: 0;
    overflow-x: hidden; /* CHANGED: prevent horizontal scroll/overflow */
    /* Make background rules explicit and higher priority to avoid white gaps */
    background-color: var(--bg) !important;
    background-image: linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 92%, var(--accent) 8%) 100%) !important;
    background-attachment: fixed !important;
    background-repeat: no-repeat !important;
    background-size: cover !important;
  }

  /* Extra safety: force html/body to use the theme background color, remove margins,
     and ensure root and its immediate child fill the viewport height. This prevents
     small white strips from appearing in some browsers when the layout doesn't
     occupy the full viewport. */
  html, body {
    background-color: var(--bg) !important;
    margin: 0 !important;
    height: 100% !important;
  }

  #root {
    min-height: 100vh !important;
  }

  /* Sometimes an app mounts a top-level wrapper under #root; make sure it fills too */
  #root > * {
    min-height: 100vh !important;
  }

  /* Light theme */
  :root {
    --bg: #ffffff;
      --nav-bg: #ffffff; /* sidebar/nav should be light in light mode so text is visible */
    --mobile-nav-bg: #ffffff;
    --mobile-text: #111827;
    --text: #111827;
    --text-nav: #111827;
    --accent: #8878EE;
      --border: rgba(0,0,0,0.08);
    --muted: #6b7280;

    /* Glass tokens - light mode (use subtle dark tints for outlines on white) */
    --glass-bg: rgba(0, 0, 0, 0.04);
    --glass-bg-light: rgba(0, 0, 0, 0.02);
    --glass-bg-heavy: rgba(0, 0, 0, 0.06);
    --glass-border: rgba(0, 0, 0, 0.06);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
    --glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.04);
    --glass-shadow-heavy: 0 12px 48px rgba(0, 0, 0, 0.08);
    /* Selection colors for light mode */
    --selection-bg: color-mix(in srgb, var(--accent) 65%, white 35%);
    --selection-color: #ffffff;
  }

  /* Dark theme */
  :root.dark {
    --bg: #121217; /* actual dark background per user */
    --nav-bg: #121217;
    --mobile-nav-bg: #121217;
    --mobile-text: #ffffff;
    --text: #e5e7eb;
    --text-nav: #ffffff;
    --accent: #8878EE;
    --border: #2D2D3B;
    --muted: #9ca3af;

    /* Glass tokens - dark mode */
    --glass-bg: rgba(30, 30, 36, 0.72);
    --glass-bg-light: rgba(40, 40, 46, 0.60);
    --glass-bg-heavy: rgba(25, 25, 30, 0.85);
    --glass-border: rgba(255, 255, 255, 0.10);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    --glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.3);
    --glass-shadow-heavy: 0 12px 48px rgba(0, 0, 0, 0.6);
    /* Selection colors for dark mode */
    --selection-bg: color-mix(in srgb, var(--accent) 65%, black 15%);
    --selection-color: #ffffff;
  }

  body {
    /* body inherits the theme variables; keep color and ensure no default margin */
    color: var(--text);
    margin: 0;
  }

/* Make text selection use the brand accent and respect theme variables */
::selection {
  background: var(--selection-bg);
  color: var(--selection-color);
}
::-moz-selection {
  background: var(--selection-bg);
  color: var(--selection-color);
}

  /* #root is covered above in the unified rule. */

  /* Make sure page containers are transparent so the body background shows through
     when scrolling beyond the centered content. This prevents showing a flat white
     area on tall pages. */
  .main-content, .content-column, .projects-frame, .project-card, .page-pad {
    background-color: transparent !important;
  }

  /* Slight visual nudge: push primary page containers down by a few pixels to improve spacing
     without affecting layout or scroll behavior. This uses transform (no reflow) so it stays
     performant and won't affect document flow (only visual offset). */
  /* Don't apply the visual nudge to elements that are fixed/fullscreen (e.g. the splash overlay)
     because transforming those creates a new stacking context and can break fixed positioning.
     Use a small margin-top instead — it nudges layout without creating a new stacking context. */
  .main-content > *:not(.fixed),
  .content-column > *:not(.fixed),
  .projects-frame > *:not(.fixed),
  .page-pad > *:not(.fixed) {
    margin-top: 4px;
  }

  /* helper components */
  .card-placeholder {
    background: linear-gradient(135deg, var(--accent) 0%, color-mix(in srgb, var(--accent) 60%, white) 100%);
  }

  /* nav item active indicator and hover animation */
  .sidebar-nav-item {
    position: relative;
    transform: translateZ(0);
  }

  .sidebar-nav-item:hover { transform: translateX(4px); }

  .sidebar-nav-item::before {
    content: '';
    position: absolute;
    left: -12px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    transition: width 150ms ease;
  }

  .sidebar-nav-item.active::before {
    width: 4px;
    height: 48%;
    background: var(--accent);
  }

  /* Collapsed sidebar styles */
  .sidebar-collapsed {
    width: 72px !important;
  }

  .sidebar-collapsed .nav-label,
  .sidebar-collapsed .sidebar-subtitle {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s;
  }

  .sidebar-collapsed .sidebar-nav-item {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.5rem 0.5rem;
    width: calc(100% - 1rem);
    margin: 0.25rem auto;
    box-sizing: border-box;
  }

  .sidebar-collapsed .sidebar-nav-item span:first-child {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin: 0;
  }

  .sidebar-collapsed .nav-label {
    display: none;
  }

  /* Hover should be subtle (no pill) in collapsed mode; active keeps a thicker pill */
  /* In collapsed mode: keep hover animation (slide slightly) but no pill; active shows a small dot below the icon */
  .sidebar-collapsed .sidebar-nav-item:hover {
    background: rgba(255,255,255,0.02) !important;
    transform: translateX(6px) !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }

  /* Remove pill for active; add a small dot under active icon to indicate selection */
  .sidebar-collapsed .sidebar-nav-item.active {
    background: transparent !important;
    transform: none !important;
  }

  .sidebar-collapsed .sidebar-nav-item.active::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: 1px; /* nudged down ~3px */
    width: 6px;
    height: 6px;
    background: var(--accent);
    border-radius: 999px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.18);
  }

  .sidebar-collapsed .sidebar-nav-item::before {
    display: none;
  }

  .sidebar-collapsed .social-icons {
    justify-content: center;
    padding-top: 0.5rem;
  }

  .sidebar-collapsed .social-separator {
    margin: 0 0.5rem;
    opacity: 0.2;
  }

  /* Main content transition */
  .main-content {
    transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: margin-left;
    min-height: calc(100vh - var(--nav-height) - 120px); /* ensure footer sits at bottom consistently */
    display: flex;
    flex-direction: column;
    position: relative; /* create stacking context for grid pseudo-element */
  }

  /* Subtle grid overlay behind page content (not on the sidebar). Uses a fixed pseudo element so it doesn't scroll separately. */
  :root {
    /* RGB color for grid (purple) */
    --grid-rgb: 136, 120, 238; /* #8878EE */
    --grid-opacity: 0.035; /* very subtle */
    --grid-size: 48px; /* spacing between lines */
  }

  .main-content::before {
    content: '';
    position: fixed;
    top: 0;
    left: var(--sidebar-width, 18rem);
    width: calc(100% - var(--sidebar-width, 18rem));
    height: 100vh;
    pointer-events: none;
    z-index: -1; /* behind content; lowered so the spotlight overlay can sit between grid and content */
    background-image:
      repeating-linear-gradient(
        to right,
        rgba(var(--grid-rgb), var(--grid-opacity)) 0,
        rgba(var(--grid-rgb), var(--grid-opacity)) 1px,
        transparent 1px,
        transparent var(--grid-size)
      ),
      repeating-linear-gradient(
        to bottom,
        rgba(var(--grid-rgb), var(--grid-opacity)) 0,
        rgba(var(--grid-rgb), var(--grid-opacity)) 1px,
        transparent 1px,
        transparent var(--grid-size)
      );
    background-repeat: repeat;
    mix-blend-mode: overlay;
    opacity: 1;
  }

  /* Ensure page content sits above the grid overlay */
  .main-content > * {
    position: relative;
    z-index: 1;
  }

  /* When sidebar is collapsed (small width), adjust the overlay left offset */
  .has-collapsed-sidebar .main-content::before {
    left: 72px;
    width: calc(100% - 72px);
  }

  /* Spotlight overlay that highlights the area under the cursor on larger screens.
     It sits above the grid (which is -1) and below page content (which is z-index: 1).
     The component updates --mouse-x and --mouse-y to position the radial gradient. */
  .grid-spotlight {
    position: fixed;
    top: 0;
    left: var(--sidebar-width, 18rem);
    width: calc(100% - var(--sidebar-width, 18rem));
    height: 100vh;
    pointer-events: none;
    z-index: 0; /* between grid (-1) and content (1) */
    opacity: 0; /* toggled via JS to fade in/out */
    transition: opacity 300ms var(--ui-ease);
    mix-blend-mode: overlay;
    /* use an elliptical, slightly offset gradient for a more cinematic spotlight */
    /* subtle, focused elliptical spotlight centered around cursor */
    /* circular spotlight centered on the cursor */
    background: radial-gradient(
      circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
      rgba(var(--grid-rgb), 0.14) 0px,
      rgba(var(--grid-rgb), 0.07) 48px,
      rgba(var(--grid-rgb), 0.03) 120px,
      transparent 220px
    );
  filter: blur(3px) saturate(1.02);
    /* subtle glass sheen */
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.01), 0 6px 18px rgba(0,0,0,0.05);
    will-change: opacity, background-position;
    backdrop-filter: none;
  }

  .has-collapsed-sidebar .grid-spotlight {
    left: 72px;
    width: calc(100% - 72px);
  }

  /* Only enable the spotlight on non-touch/fine-pointer devices and larger screens */
  /* On small screens or coarse pointers we hide the interactive spotlight, but keep the subtle grid background visible. */
  @media (max-width: 1199px), (pointer: coarse) {
    .grid-spotlight { display: none !important; }
    /* keep the grid lines background present; the ::before overlay will adapt to full width in the mobile rule below */
    .main-content::before { opacity: 1; }
  }

  /* Highlight actual grid lines in a small radius around the cursor. This element
     uses a mask to reveal a purple version of the repeating-linear-gradient only
     near the mouse. It is hidden on coarse pointers or small screens. */
  .grid-lines-highlight {
    position: fixed;
    top: 0;
    left: var(--sidebar-width, 18rem);
    width: calc(100% - var(--sidebar-width, 18rem));
    height: 100vh;
    pointer-events: none;
    z-index: 0; /* between grid (-1) and content (1) */
    opacity: 0;
    transition: opacity 220ms var(--ui-ease);
    background-image:
      repeating-linear-gradient(
        to right,
        rgba(var(--grid-rgb), 0.95) 0,
        rgba(var(--grid-rgb), 0.95) 1px,
        transparent 1px,
        transparent var(--grid-size)
      ),
      repeating-linear-gradient(
        to bottom,
        rgba(var(--grid-rgb), 0.95) 0,
        rgba(var(--grid-rgb), 0.95) 1px,
        transparent 1px,
        transparent var(--grid-size)
      );
    mix-blend-mode: overlay;
    will-change: opacity, -webkit-mask-image, mask-image;
    /* smaller circular mask that focuses on a small line segment */
  /* circular mask to reveal only a round area of the grid lines */
  -webkit-mask-image: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(0,0,0,1) 0px, rgba(0,0,0,0.95) 28px, rgba(0,0,0,0) 96px);
  mask-image: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(0,0,0,1) 0px, rgba(0,0,0,0.95) 28px, rgba(0,0,0,0) 96px);
  backdrop-filter: blur(2px) saturate(1.02);
    opacity: 0;
  }

  .has-collapsed-sidebar .grid-lines-highlight {
    left: 72px;
    width: calc(100% - 72px);
  }

  /* Hide the line-highlight on small/coarse devices (no pointer hover), but keep the base grid visible */
  @media (max-width: 1199px), (pointer: coarse) {
    .grid-lines-highlight { display: none !important; }
    /* ensure the base grid overlay remains visible on mobile/tablet */
    .main-content::before { opacity: 1; }
  }

  /* Mobile: sidebar hidden — overlay should cover full width */
  @media (max-width: 1199px) {
    .main-content::before {
      left: 0;
      width: 100%;
    }
  }

  /* Respect reduced motion: disable mix-blend tricks if user prefers reduced motion or low-power */
  @media (prefers-reduced-motion: reduce) {
    .main-content::before {
      mix-blend-mode: normal;
    }
  }

  /* Animate width transition */
  .sidebar {
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: width;
  }

  .dotted-line {
    border-top: 2px dotted var(--border);
  }

  /* tighter default spacing helpers */
  :root {
    --site-gap: 1rem; /* general smaller gap */
    --card-padding: 0.75rem;
  }

  

  .available-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: #0f2f1f;
    color: #c6f6d5;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 13px;
  }

  /* new: available-dot glow + blink */
  .available-dot { display: inline-flex; align-items: center; justify-content: center; width: 14px; height: 14px; }
  .available-dot .dot-core {
    width: 8px; height: 8px; border-radius: 999px; background: #34d399; box-shadow: 0 0 0 0 rgba(52,211,153,0.6); display: block;
    transition: box-shadow 300ms var(--ui-ease), transform 220ms var(--ui-ease);
    will-change: box-shadow, transform;
    animation: dot-pulse 1800ms infinite;
  }

  @keyframes dot-pulse {
    0% { box-shadow: 0 0 0 0 rgba(52,211,153,0.55); transform: scale(1); }
    50% { box-shadow: 0 0 12px 6px rgba(52,211,153,0.12); transform: scale(1.05); }
    100% { box-shadow: 0 0 0 0 rgba(52,211,153,0.0); transform: scale(1); }
  }

  .available-pill:focus, .available-pill:focus-visible {
    outline: 3px solid color-mix(in srgb, #34d399 35%, transparent);
    outline-offset: 3px;
  }

  /* per-card outline appearance (simplified) */

  /* project badge updated to use glass styling (softer, semi-transparent) */
  .project-badge {
    background: rgba(0,0,0,0.5); /* semi-transparent dark tint */
    color: #fff;
    border-radius: 8px;
    padding: 8px 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.22);
    border: 1px solid rgba(255,255,255,0.04);
    flex-wrap: nowrap;
    white-space: nowrap;
    overflow: hidden;
  }

  .project-badge > div {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Loader glass UI tweaks */
  .progress-loader-container {
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    border: 1px solid rgba(255,255,255,0.06);
    box-shadow: var(--glass-shadow-sm);
  }

  /* Make loader text more visible in both light and dark modes */
  .progress-loader-container .text-sm,
  .progress-loader-container .text-xs {
    color: var(--text) !important;
    opacity: 0.9;
    font-weight: 500;
  }

  /* Make percentage stand out more */
  .progress-loader-container .text-xs:last-child {
    font-weight: 600;
  }

  .glass-hint-row {
    align-items: center;
    gap: 8px;
  }

  /* Loader hint text now provided directly in the DOM for accessibility. */
  /* Intentionally no ::before content here to avoid duplicate text. */


  @supports (backdrop-filter: blur(4px)) or (-webkit-backdrop-filter: blur(4px)) {
    .project-badge {
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(6px) saturate(120%);
      -webkit-backdrop-filter: blur(6px) saturate(120%);
    }
  }

  .card-placeholder {
    border-radius: 8px;
    background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 70%, white 30%) 0%, color-mix(in srgb, var(--accent) 40%, #000 60%) 100%);
    aspect-ratio: 4 / 3;
    background-size: cover;
  }

  /* Glassy hover effect for project cards */
  .project-glass-hover {
    will-change: transform, box-shadow, backdrop-filter;
    transition: transform var(--ui-duration) var(--ui-ease), box-shadow var(--ui-duration) var(--ui-ease), border-color var(--ui-duration) var(--ui-ease), backdrop-filter var(--ui-duration) var(--ui-ease);
  }

  .project-glass-hover:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: var(--glass-shadow-heavy);
    border-color: color-mix(in srgb, var(--accent) 30%, var(--glass-border));
  }

  /* subtle sheen across the card on hover (fast purple shimmer) */
  /* shimmer removed per request; keep no pseudo-element here */

  /* Tilt variables and base */
  .project-glass-hover {
    --tx: 0deg;
    --ty: 0deg;
    --ax: 0%;
    transform-origin: center;
    transition: transform 220ms var(--ui-ease), box-shadow 220ms var(--ui-ease);
  }

  .project-glass-hover {
    position: relative;
    overflow: visible;
  }

  /* (outline removed per request) */

  /* unified project card surface */
  .project-card {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0,0,0,0.18);
    border: none; /* no per-card border */
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  }

  /* Title shift on hover driven by --sx/--sy set by JS */
  .project-glass-hover .absolute p,
  .project-glass-hover .absolute h3 {
    transition: transform 220ms var(--ui-ease);
  }

  .project-glass-hover .absolute h3 {
    transform: translate(var(--sx, 0), var(--sy, 0));
  }

  /* Brand micro-animation for the A.F. link */
  .brand-link {
    display: inline-block;
    padding: 2px 6px;
    border-radius: 6px;
    transition: transform 160ms var(--ui-ease), box-shadow 160ms var(--ui-ease), color 160ms var(--ui-ease);
    will-change: transform;
  }

  .brand-link:focus {
    outline: 3px solid color-mix(in srgb, var(--accent) 30%, transparent);
    outline-offset: 4px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  }

  .brand-link:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 8px 22px rgba(0,0,0,0.12);
  }

  /* Home page name: initial entrance animation and magnetic smoothing */
  .home-name {
    transform-style: preserve-3d;
    transition: transform 260ms var(--ui-ease);
    backface-visibility: hidden;
    will-change: transform;
    opacity: 0;
    transform-origin: center;
    animation: name-entrance 820ms cubic-bezier(.2,.9,.2,1) forwards;
    /* minor translateZ to lift above grid */
  }

  @keyframes name-entrance {
    0% { transform: translateY(-18px) scale(0.98) rotateX(6deg); opacity: 0 }
    70% { opacity: 1 }
    100% { transform: translateY(0) scale(1) rotateX(0deg); opacity: 1 }
  }

  /* reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    .available-dot .dot-core { animation: none !important }
    .home-name { animation: none !important; transition: none !important; transform: none !important; opacity: 1 !important }
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .brand-link,
    .brand-link:focus,
    .brand-link:hover {
      transition: none !important;
      transform: none !important;
      box-shadow: none !important;
    }
  }

  /* Service description clamp + expand */
  .service-desc.clamped {
    display: -webkit-box;
    display: box;
    -webkit-line-clamp: 4; /* show 4 lines */
    line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .service-desc.expanded {
    max-height: none;
  }

  /* Ensure action row stays aligned at the bottom by making card a column flex container (handled in JSX) */

  /* Project metadata block spacing: vertically center and ensure consistent gap */
  .project-meta {
    align-items: center; /* vertically center grid cells */
  }

  .project-meta > div {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .project-meta h3 {
    margin-bottom: 0.25rem;
  }

  .project-meta p {
    margin: 0;
  }

/* custom cursor removed */

  /* stack icon - soft inset tile */
  .stack-icon {
    border-radius: 8px;
    padding: 8px;
    width: 56px;
    height: 56px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: transparent; /* icon sits on the card surface */
    border: none;
    box-shadow: none;
  }

  /* ===================================
     BUTTON DESIGN SYSTEM
     =================================== */
  
  /* Primary Button - Main call-to-action */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    background: var(--accent);
    color: white;
    font-weight: 500;
    border: none;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-primary:hover {
    background: color-mix(in srgb, var(--accent) 85%, white);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(136, 120, 238, 0.3);
  }

  .btn-primary:active {
    transform: translateY(0);
  }

/* === Sidebar-collapsed fixes: ensure content fills remaining width === */
.has-collapsed-sidebar .main-content {
  margin-left: 72px !important;
  width: calc(100vw - 72px) !important;
}

.has-collapsed-sidebar .main-content .content-column,
.has-collapsed-sidebar .main-content .projects-frame {
  max-width: none !important;
  width: 100% !important;
  margin-right: 0 !important;
}

/* make sure footer also respects the top-level var if present */
.has-collapsed-sidebar .footer-main { margin-left: 72px !important; width: calc(100% - 72px) !important; }

/* Ensure footer inner column fills available width when sidebar collapsed so
   the right-side item lines up correctly with the page edge. */
.has-collapsed-sidebar .footer-main .content-column,
.has-collapsed-sidebar .footer-main .footer-content {
  max-width: none !important;
  width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
}

.has-collapsed-sidebar .footer-main .footer-content {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
}


  /* Secondary Button - Outline style */
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    border: 2px solid var(--border);
    color: var(--text);
    background: transparent;
    font-weight: 500;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-secondary:hover {
    border-color: var(--accent);
    color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(136, 120, 238, 0.15);
  }

  .btn-secondary:active {
    transform: translateY(0);
  }

  /* Tertiary Button - Dotted outline style */
  .btn-tertiary {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.625rem 1.25rem;
    border-radius: 0.5rem;
    border: 2px dotted var(--border);
    color: var(--text);
    background: transparent;
    font-weight: 500;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-tertiary:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: color-mix(in srgb, var(--accent) 5%, transparent);
    transform: translateY(-1px);
  }

  .btn-tertiary:active {
    transform: translateY(0);
  }

  /* Old button class for backwards compatibility - map to secondary */
  .btn-outline-accent {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    border: 2px solid var(--border);
    color: var(--text);
    background: transparent;
    font-weight: 500;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .btn-outline-accent:hover {
    border-color: var(--accent);
    color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(136, 120, 238, 0.15);
  }

  .project-card-hover {
    transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
    will-change: transform;
    position: relative;
    overflow: visible; /* allow shadows to show outside the card */
  }

  .project-card-hover:hover .project-card {
    transform: translateY(-2px) scale(1.005);
    box-shadow: 0 18px 46px rgba(0,0,0,0.18);
    z-index: 50; /* bring hovered card above its siblings */
  }

/* Light mode: soften hover shadows so they aren't harsh on white backgrounds */
:root:not(.dark) .project-card-hover:hover .project-card {
  box-shadow: 0 12px 30px rgba(0,0,0,0.06);
}

  /* single frame border around the projects grid */
  .projects-frame {
    padding: 0;
    border: none;
    box-shadow: none;
    background: transparent;
    max-width: 100%;
    box-sizing: border-box;
  }

  .stack-item {
    transition: transform 180ms ease, box-shadow 180ms ease;
    border: 2px dotted var(--border);
  }

  .stack-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  }

  @media (min-width: 768px) {
    /* remove global body padding; main layout uses md:ml-72 instead */
  }

  /* Desktop: Single authoritative layout for all pages. Content sits right next 
     to the sidebar with minimal gutter. UPDATED: Reduced spacing */
  @media (min-width: 1200px) {
    .main-content {
      /* Reserve space for sidebar, content sits right next to it with small gutter */
      margin-left: var(--sidebar-width, 18rem);
      padding-left: 32px;
      padding-right: 48px; /* More padding on right so content doesn't hug edge */
      padding-top: 80px; /* Move content further down from toggle button */
      box-sizing: border-box;
      display: block;
      z-index: 10;
      width: calc(100vw - var(--sidebar-width, 18rem)); /* Prevent overflow */
    }

    .has-collapsed-sidebar .main-content { margin-left: 72px !important; }
    .has-expanded-sidebar .main-content { margin-left: 18rem !important; }

    .main-content .content-column,
    .has-expanded-sidebar .main-content .content-column {
      margin-left: 0 !important;
      margin-right: auto !important;
      padding-left: 0 !important; /* gutter handled by .main-content */
      padding-right: 0 !important;
      max-width: 1120px !important;
      box-sizing: border-box !important;
      width: 100%;
    }

    /* When sidebar is collapsed, expand content to use the extra space */
    .has-collapsed-sidebar .main-content .content-column {
      margin-left: 0 !important;
      margin-right: 0 !important; /* allow the column to reach the right edge */
      padding-left: 0 !important;
      padding-right: 0 !important;
      max-width: none !important; /* remove hard cap so it can fill remaining space */
      box-sizing: border-box !important;
      width: 100%;
    }

    /* On ultra-wide screens keep a readable max-width but don't center (stay left-aligned) */
    @media (min-width: 2000px) {
      .has-collapsed-sidebar .main-content .content-column {
        max-width: 1600px !important;
        margin-right: 0 !important;
      }
    }

    /* When collapsed, let inner frames (projects, grids) fill the available width
       instead of staying capped and centered. This removes the visible right gap. */
    .has-collapsed-sidebar .main-content .projects-frame,
    .has-collapsed-sidebar .main-content .stack-grid,
    .has-collapsed-sidebar .main-content .projects-frame .grid {
      max-width: none !important;
      margin-left: 0 !important;
      margin-right: 0 !important;
      width: 100% !important;
    }

    /* Make sure cards can expand to use the available width when the sidebar is collapsed */
    .has-collapsed-sidebar .main-content .projects-frame .card-placeholder,
    .has-collapsed-sidebar .main-content .projects-frame .project-card {
      width: 100%;
    }
    /* Remove the conflicting sidebar + main-content rules */

    /* Sidebar styling */
    .sidebar:not(.sidebar-collapsed) {
      width: var(--sidebar-width, 18rem);
    }

    /* At desktop sizes show the sidebar */
    .sidebar {
      display: flex !important;
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      flex-direction: column;
      justify-content: space-between;
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
      padding-left: 1rem;
      padding-right: 1rem;
      z-index: 40;
      width: var(--sidebar-width, 18rem);
    }

    /* On very wide screens center the content column inside the remaining area so the right side doesn't look empty */
    @media (min-width: 1600px) {
      .main-content {
        display: flex; /* make centering effective */
        justify-content: center;
        align-items: flex-start;
        padding-right: 0;
      }
    }

    /* Better centering for common large desktop (e.g. 1600-2560) - keep sidebar space but center the
       content-column inside the remaining viewport so it doesn't hug the left side at 1920x1080. */
    @media (min-width: 1600px) {
      /* Keep main-content natural width but reserve space for the sidebar via padding. */
      .main-content {
        padding-left: var(--sidebar-width, 18rem) !important;
        padding-right: 0 !important;
        display: flex;
        justify-content: center;
        box-sizing: border-box;
      }

      /* Make the content column use the available space (viewport minus
         sidebar and a small gutter). This fills the right gap at 1920x1080
         while preserving a comfortable inner gutter. */
      .main-content .content-column {
        /* Use the smaller of 1400px or the available viewport space minus the
           sidebar and a 96px gutter. This prevents overflow/clipping around
           mid-large widths (e.g. 1600-1700px) while keeping a nice wide measure
           on very large displays. */
        max-width: min(1400px, calc(100vw - var(--sidebar-width, 18rem) - 96px)) !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
        box-sizing: border-box !important;
      }

      /* When the sidebar is collapsed, use the smaller collapsed width in the calc */
      .has-collapsed-sidebar .main-content {
        padding-left: 72px !important;
      }

      .has-collapsed-sidebar .main-content .content-column {
        max-width: calc(100vw - 72px - 96px) !important;
      }

      /* Center footer content similarly to main-content on very wide screens
         so the footer doesn't stick to the left at 1920px+ resolutions. */
      .footer-main {
        display: flex;
        justify-content: center;
        box-sizing: border-box;
        padding-left: var(--sidebar-width, 18rem) !important;
        padding-right: 0 !important;
      }

          .footer-main .content-column {
            /* Align footer content to the same centered column as main content */
            max-width: min(1400px, calc(100vw - var(--sidebar-width, 18rem) - 96px)) !important;
            margin-left: 0 !important;
            margin-right: 220px !important;
            width: 100% !important;
            box-sizing: border-box !important;
            display: flex;
            justify-content: space-between; /* keep left/right items spaced evenly */
            align-items: center;
            padding-left: 24px; /* subtle inward nudge for visual balance */
          }


      .has-collapsed-sidebar .footer-main {
        padding-left: 72px !important;
      }

      .has-collapsed-sidebar .footer-main .content-column {
        max-width: calc(100vw - 72px - 96px) !important;
      }

      /* Resume iframe frame should respect content-column width */
      .resume-frame {
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
      }

      .resume-frame .resume-iframe,
      .resume-iframe {
        width: 100% !important;
        height: 100% !important;
        display: block;
        border: 0 !important;
      }
    }
  }

  /* Content column: use a predictable max-width so collapsing/expanding the sidebar
     doesn't change the content column width. Positioning is handled by .main-content
     which reserves space for the sidebar via padding-left. */
  .content-column {
    width: 100%;
    max-width: 1120px; /* fixed reading width for content columns */
    box-sizing: border-box;
    margin-left: 0;
    margin-right: 0;
    padding-bottom: 0; /* Remove any extra bottom padding */
  }

  /* Make stack-grid span the same visual width as content columns when used full-width */
  .stack-grid { max-width: 1120px; margin-left: 0; margin-right: 0; }

  /* smaller break for tighter spaces: reduce gaps if the available width is narrow */
  @media (max-width: 1280px) {
    .projects-frame .grid {
      gap: 10px;
    }
    .stack-grid {
      gap: 10px;
    }
  }

  /* Responsive projects grid that keeps content centered and prevents clipping */
  .projects-frame {
    padding: 0;
    width: 100%;
    box-sizing: border-box;
    background: transparent;
    max-width: 1120px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Default grid: fluid, wrap when needed, maintain minimum card width to avoid clipping */
  .projects-frame .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 24px;
    align-items: start;
    justify-content: start;
  }

  .projects-frame .card-placeholder {
    aspect-ratio: 4 / 3;
    border-radius: 12px;
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  /* Desktop: larger-layout rules. Keep 2-column grid for 1200-1399 so
     mid-large widths present a 2x2 layout; only switch to 3 columns at >=1400px */
  @media (min-width: 1200px) and (max-width: 1399px) {
    /* keep consistent max width with other pages */
    .content-column { max-width: 1120px; }
    .main-content { margin-left: var(--sidebar-width, 18rem); padding-left: 24px; padding-right: 24px; }
    /* two columns for medium-desktop so grid wraps into 2 and 2 at widths like 1278 */
    .projects-frame .grid { grid-template-columns: repeat(2, minmax(320px, 1fr)); gap: 24px; }
  .projects-frame .card-placeholder { aspect-ratio: 5 / 4; }
    .stack-grid { gap: 1rem 1rem; }
  }

  @media (min-width: 1400px) {
    .content-column { max-width: 1120px; }
    .main-content { margin-left: var(--sidebar-width, 18rem); padding-left: 24px; padding-right: 24px; }
    .projects-frame .grid { grid-template-columns: repeat(3, minmax(310px, 1fr)); gap: 24px; }
  .projects-frame .card-placeholder { aspect-ratio: 5 / 4; }
    .stack-grid { gap: 1rem 1rem; }
    /* Hide 4th project card when showing 3 columns */
    .hidden-fourth { display: none; }
  }

  /* Tablet: slightly taller portrait cards and auto-fit columns */
  @media (min-width: 810px) and (max-width: 1199px) {
    .content-column { max-width: 100%; padding-left: 2rem; padding-right: 2rem; }
    /* Force two columns on tablet with slightly smaller min width for smoother downscaling */
    .projects-frame .grid { grid-template-columns: repeat(2, minmax(320px, 1fr)); gap: 28px; }
    /* Use portrait aspect ratio for tablet cards with a slightly lower max-height for consistency */
  .projects-frame .card-placeholder { width: 100%; aspect-ratio: 5 / 4; max-height: 480px; object-fit: cover; }
    
    /* Stack grid spacing for tablet */
    .stack-grid { gap: 1rem 0.75rem; }
  }

  /* Phone: single column, cap width so visuals remain consistent */
  @media (max-width: 809px) {
    .content-column { padding-left: 1rem; padding-right: 1rem; max-width: 100%; }
    .projects-frame .grid { grid-template-columns: 1fr; gap: 20px; }
  .projects-frame .card-placeholder { width: 100%; aspect-ratio: 5 / 4; max-height: 420px; }
    
    /* Stack grid for mobile - 2 columns */
    .stack-grid { gap: 0.75rem; grid-template-columns: repeat(2, 1fr); }
    
    /* Fix work experience card text cutoff on mobile */
    .content-column .space-y-4 button .flex.items-center.gap-3 {
      flex-wrap: wrap !important;
      white-space: normal !important;
    }
  }
 
  /* Sidebar header fixed height to keep collapsed/expanded alignment consistent */
  .sidebar-header {
    height: 56px; /* matches the visual header height */
    display: flex;
    align-items: center;
  }

  /* project slug shown next to the Projects nav item when on a project detail */
  .project-slug {
    display: inline-block;
    max-width: 10rem; /* limit width */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 12px;
    color: var(--muted);
    background: var(--glass-bg-light);
    padding: 2px 6px;
    border-radius: 6px;
    border: 1px solid var(--glass-border);
    transform-origin: left center;
    animation: slug-in 360ms cubic-bezier(.2,.9,.2,1);
  }

/* Light mode specific tweaks: make project slug readable on white */
:root:not(.dark) .project-slug {
  background: color-mix(in srgb, var(--nav-bg) 92%, rgba(0,0,0,0.06) 8%);
  border: 1px solid rgba(0,0,0,0.06);
  color: #374151; /* slightly darker muted for readability */
}

  @keyframes slug-in {
    from { opacity: 0; transform: translateX(-6px) scale(0.98); }
    to { opacity: 1; transform: translateX(0) scale(1); }
  }

  /* Glass UI utility classes */
  .glass {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
  }

  @supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
    .glass {
      backdrop-filter: blur(12px) saturate(140%);
      -webkit-backdrop-filter: blur(12px) saturate(140%);
    }
    
    .glass-light {
      background: var(--glass-bg-light);
      backdrop-filter: blur(10px) saturate(130%);
      -webkit-backdrop-filter: blur(10px) saturate(130%);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow-sm);
    }
    
    .glass-heavy {
      background: var(--glass-bg-heavy);
      backdrop-filter: blur(16px) saturate(150%);
      -webkit-backdrop-filter: blur(16px) saturate(150%);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
    }
  }

  /* Accessibility: reduced transparency */
  @media (prefers-reduced-transparency: reduce) {
    .glass,
    .glass-light,
    .glass-heavy {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      background: var(--nav-bg) !important;
      border: 1px solid var(--border) !important;
    }
  }

  /* Mobile nav styling - similar to desktop sidebar */
  .mobile-nav {
    display: none;
    top: 0;
    left: 0;
    right: 0;
    position: fixed;
    z-index: 1200;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    align-items: center;
    height: var(--nav-height);
    backdrop-filter: blur(12px) saturate(140%);
    background: var(--glass-bg);
    border-bottom: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow-sm);
  }

  .mobile-menu {
    position: fixed;
    top: var(--nav-height);
    left: 0;
    right: 0;
    /* opaque panel so content underneath doesn't visually bleed through */
    bottom: 0;
    height: calc(100vh - var(--nav-height));
    background: color-mix(in srgb, var(--nav-bg) 92%, rgba(255,255,255,0.02) 8%);
    padding: 1.25rem 1rem;
    display: none;
    border-bottom: none;
    box-shadow: 0 18px 48px rgba(0,0,0,0.18);
    z-index: 1200;
  }

  /* Reusable page padding utility: keeps top and bottom spacing consistent
    across all pages. Use this on the page <main> element instead of ad-hoc
    per-breakpoint pt/pb classes so every page mirrors vertical spacing. */
  .page-pad {
    padding-top: 0; /* Top padding now handled by .main-content */
    padding-bottom: 28px; /* Reduced bottom padding for tighter footer spacing */
  }

  /* Mobile-specific spacing tweaks */
  @media (max-width: 640px) {
    /* Give CTAs and the dotted divider more breathing room on small screens */
    .page-pad .projects-header {
      margin-top: 20px;
    }
    .page-pad .w-full.h-\[1px\].my-12 {
      margin-top: 20px;
      margin-bottom: 28px;
    }
    /* Ensure there's enough bottom padding so the footer can be reached on short pages */
    .page-pad { padding-bottom: 64px; }
  }

  /* Light mode: add subtle border at top for definition */
  :root:not(.dark) .mobile-menu {
    background: color-mix(in srgb, var(--nav-bg) 96%, rgba(0,0,0,0.02) 4%);
    border-top: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 -2px 12px rgba(0,0,0,0.06), 0 8px 24px rgba(0,0,0,0.08);
  }

  .mobile-menu.open {
    display: block;
  }

  /* animate mobile menu open/close with subtle slide */
  .mobile-menu {
    transition: opacity 220ms ease, transform 220ms cubic-bezier(.2,.9,.2,1);
  }
  .mobile-menu.closed {
    opacity: 0;
    transform: translateY(-6px);
    pointer-events: none;
    display: none; /* fallback when JS toggles */
  }
  .mobile-menu.open {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
    display: block;
  }

  /* Box the mobile menu contents so it appears as a panel instead of fully transparent */
  .mobile-menu-inner {
    background: var(--mobile-nav-bg);
    border-radius: 8px;
    padding: 1rem;
    box-shadow: var(--glass-shadow-sm);
    border: 1px solid var(--glass-border);
  }
  
  .mobile-menu-inner {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    width: 100%;
    max-width: none;
    margin: 0;
  }
  
  .mobile-menu-link {
    padding: 0.9rem 1rem;
    font-weight: 500;
    transition: all 160ms ease;
    text-align: left;
    width: 100%;
    display: flex;
    align-items: center;
    gap: 12px;
    border-left: 4px solid transparent;
    background: transparent; /* no filled boxes for inactive items */
    color: var(--text);
    border-radius: 8px;
  }
  
  .mobile-menu-link:hover {
    background: color-mix(in srgb, var(--accent) 6%, transparent);
    transform: translateX(6px);
  }

  .mobile-menu-link.active {
    border-left-color: var(--accent);
    color: var(--accent);
    font-weight: 600;
  }

  /* ensure project-slug looks right in mobile menu */
  .mobile-menu .project-slug {
    font-size: 12px;
    max-width: none; /* allow full slug at larger breakpoints */
  }

  /* Light mode: add subtle borders and refined backgrounds to menu items */
  :root:not(.dark) .mobile-menu-link {
    background: rgba(255,255,255,0.4);
    border: 1px solid rgba(0,0,0,0.06);
    border-left: 4px solid transparent;
    box-shadow: 0 1px 3px rgba(0,0,0,0.02);
  }

  :root:not(.dark) .mobile-menu-link:hover {
    background: rgba(136, 120, 238, 0.08);
    border-color: rgba(136, 120, 238, 0.15);
    box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  }

  :root:not(.dark) .mobile-menu-link.active {
    background: rgba(136, 120, 238, 0.12);
    border-left-color: var(--accent);
    border-top-color: rgba(0,0,0,0.06);
    border-right-color: rgba(0,0,0,0.06);
    border-bottom-color: rgba(0,0,0,0.06);
    box-shadow: 0 2px 8px rgba(136, 120, 238, 0.12);
  }

  /* Tablet & small-laptop: show mobile menu as left-aligned list (not centered) */
  @media (min-width: 600px) and (max-width: 1199px) {
    .mobile-menu-inner {
      max-width: none;
      margin: 0;
      padding-left: 1.5rem; /* align with page content */
      padding-right: 1.5rem;
    }

    .mobile-menu-link {
      width: auto;
      text-align: left;
      border-radius: 0.5rem;
    }
  }

  /* Small screens: make sure the content has comfortable side padding */
  @media (max-width: 1199px) {
    .content-column {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
      max-width: 100%;
    }
    .main-content {
      padding-left: 0;
      padding-right: 0;
    }
    
    /* Adjust hero text sizing for mobile */
    h1 {
      font-size: 2.5rem;
    }
  }
  
  /* Mobile-specific adjustments */
  @media (max-width: 809px) {
    .content-column {
      padding-left: 1rem;
      padding-right: 1rem;
    }
    
    h1 {
      font-size: 2rem;
    }
    /* Projects header: keep the All Projects button vertically centered and
       same visual height as the heading on small phones. */
    .projects-header {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 12px;
    }

    .projects-header .btn-secondary {
      align-self: center;
      min-height: 40px;
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }
  }

  /* Very small phones: ensure everything fits and nothing is shifted right
     due to leftover margins or larger max-width calculations. These rules are
     conservative and aim to reset any desktop offsets and normalize button sizes. */
  @media (max-width: 420px) {
    html, body, #root { overflow-x: hidden; }

    .main-content, .main-content > * {
      margin-left: 0 !important;
      padding-left: 12px !important;
      padding-right: 12px !important;
      width: 100% !important;
      box-sizing: border-box !important;
    }

    .content-column, .projects-frame, .stack-grid, .footer-main {
      max-width: 100% !important;
      width: 100% !important;
      margin-left: 0 !important;
      margin-right: 0 !important;
      padding-left: 0 !important;
      padding-right: 0 !important;
      box-sizing: border-box !important;
    }

    /* Normalize buttons so they don't shrink or reflow awkwardly */
    .btn-primary, .btn-secondary, .btn-tertiary {
      min-height: 44px !important;
      padding-top: 0.5rem !important;
      padding-bottom: 0.5rem !important;
      padding-left: 0.9rem !important;
      padding-right: 0.9rem !important;
      font-size: 14px !important;
      white-space: nowrap !important;
      box-sizing: border-box !important;
    }

    /* Ensure footer content is left-aligned and doesn't get nudged right */
    .footer-main, .footer-content {
      margin-left: 0 !important;
      margin-right: 0 !important;
      padding-left: 12px !important;
      padding-right: 12px !important;
      width: 100% !important;
      box-sizing: border-box !important;
      text-align: left !important;
      display: flex !important;
      flex-direction: column !important;
      align-items: flex-start !important;
      gap: 6px !important;
    }

    /* Stack grid: ensure consistent 2-column layout and no right offset */
    .stack-grid { grid-template-columns: repeat(2, 1fr) !important; gap: 12px !important; }

    /* Projects grid: single column for very small phones to avoid overflow */
    .projects-frame .grid { grid-template-columns: 1fr !important; gap: 16px !important; }
    /* Compact stack items on very small phones */
    .stack-item { padding: 8px !important; gap: 8px !important; }
    .stack-item .stack-icon { width: 44px !important; height: 44px !important; }
    .stack-item .font-medium { font-size: 14px !important; }

    /* Reset background overlay left offset (grid overlay) so it doesn't cause visual right shift */
    .main-content::before { left: 0 !important; width: 100% !important; }

    /* Make sure footer doesn't inherit desktop left margins */
    .footer-main { margin-left: 0 !important; width: 100% !important; }
    .footer-main .content-column { text-align: left !important; margin-left: 0 !important; margin-right: 0 !important; padding-left: 0 !important; padding-right: 0 !important; }
  }

  /* Note: previous aggressive rule for .has-expanded-sidebar removed to avoid
     shifting all pages too far right. We keep a small gutter tweak earlier so
     About doesn't sit flush against the sidebar when expanded. */

  /* Ensure mobile nav and sidebar behavior is explicit for tablet/phone sizes */
  @media (max-width: 1199px) {
    /* show mobile nav (top bar) and keep it above everything */
    .mobile-nav {
      display: flex !important;
      position: fixed !important;
      left: 0;
      right: 0;
      top: 0;
      z-index: 1200 !important;
      align-items: center;
      height: var(--nav-height);
      padding-left: 1rem;
      padding-right: 1rem;
    }

    /* mobile menu behavior */
    .mobile-menu {
      display: none;
    }

    .mobile-menu.open {
      display: block;
    }

    /* hide the desktop sidebar completely on smaller screens */
    .sidebar {
      display: none !important;
    }

    /* ensure main content sits below the mobile nav */
    .main-content {
      padding-top: calc(var(--nav-height) + 8px) !important;
      margin-left: 0 !important;
      /* reset any leftover left offsets coming from toggled sidebar state */
      margin-left: 0 !important;
      padding-left: 1rem !important;
      padding-right: 1rem !important;
      width: 100% !important;
    }

    /* Also explicitly clear modifiers that may stick around when resizing
       from desktop collapsed/expanded states so mobile/tablet get a clean layout. */
    .has-collapsed-sidebar .main-content,
    .has-expanded-sidebar .main-content {
      margin-left: 0 !important;
      padding-left: 1rem !important;
      padding-right: 1rem !important;
      width: 100% !important;
    }
    /* Push content down a little extra on mobile to add breathing room under nav */
    .content-column {
      padding-top: 12px !important;
    }
  }

  /* Note: main-content centering override removed so the layout will respond
     to --sidebar-width. We keep the .content-column gutter tweak for expanded
     sidebar only (below). */

  /* When the sidebar is expanded, give the main content column a slightly
     larger left gutter at desktop sizes so all pages match the About layout. */
  @media (min-width: 1200px) {
    /* Removed per-page inner gutter override to keep consistent alignment
       driven by .main-content and --sidebar-width for all pages. */
   /* Do not override .main-content here; we only adjust the inner column's gutter.
     This preserves consistent main alignment across pages when the sidebar
     toggles between collapsed and expanded. */
  }


/* ==========================
   Preloader styles
   ========================== */
.preloader-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(180deg, rgba(0,0,0,0.04), rgba(0,0,0,0.02));
  z-index: 2000;
  pointer-events: auto;
}

.preloader-skip {
  position: absolute;
  top: 20px;
  right: 20px;
  background: transparent;
  border: 1px solid var(--glass-border);
  color: var(--text);
  padding: 8px 12px;
  border-radius: 8px;
  backdrop-filter: blur(6px) saturate(120%);
  cursor: pointer;
}

.preloader-orb {
  width: 140px;
  height: 140px;
  border-radius: 999px;
  position: absolute;
  transform: translate(-50%, -50%);
  left: var(--orb-x, 50vw);
  top: var(--orb-y, 50vh);
  display: inline-grid;
  place-items: center;
  cursor: pointer;
  transition: transform 220ms ease, opacity 300ms ease;
}

.orb-core {
  width: 72px;
  height: 72px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.08) 28%, transparent 60%), linear-gradient(180deg, color-mix(in srgb, var(--accent) 70%, white 30%), color-mix(in srgb, var(--accent) 40%, black 60%));
  box-shadow: 0 12px 40px rgba(136,120,238,0.16), 0 2px 8px rgba(0,0,0,0.12);
  border: 1px solid rgba(255,255,255,0.06);
}

.orb-glow {
  position: absolute;
  width: 220px;
  height: 220px;
  border-radius: 999px;
  filter: blur(18px);
  background: radial-gradient(circle, color-mix(in srgb, var(--accent) 60%, transparent) 0%, transparent 60%);
  opacity: 0.85;
}

.orb-ripple {
  position: absolute;
  width: 140px;
  height: 140px;
  border-radius: 999px;
  border: 1px solid rgba(136,120,238,0.08);
  animation: orb-breathe 2400ms ease-in-out infinite;
  opacity: 0.9;
}

@keyframes orb-breathe {
  0% { transform: scale(0.96); opacity: 0.9 }
  50% { transform: scale(1.06); opacity: 0.95 }
  100% { transform: scale(0.96); opacity: 0.9 }
}

.preloader-overlay.burst .preloader-orb {
  animation: orb-explode 650ms cubic-bezier(.2,.9,.2,1) forwards;
}

@keyframes orb-explode {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 1 }
  60% { transform: translate(-50%, -50%) scale(1.08); opacity: 0.95 }
  100% { transform: translate(-50%, -50%) scale(18); opacity: 0 }
}

/* Fade out overlay when hidden */
.preloader-overlay[hidden] { display: none }

/* Reduced-motion fallback */
@media (prefers-reduced-motion: reduce) {
  .preloader-orb, .orb-ripple, .orb-glow { animation: none !important; transition: none !important }
  .preloader-overlay { transition: opacity 200ms linear; }
}

/* Logo preloader styles */
.logo-preloader {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 18px;
  background: linear-gradient(180deg, var(--bg), color-mix(in srgb, var(--bg) 80%, var(--accent) 20%));
  color: white;
  z-index: 2200;
}

.logo-svg {
  width: min(56vw, 520px);
  height: auto;
}

.logo-svg-wrap {
  display: inline-block;
  transition: transform 260ms cubic-bezier(.2,.9,.2,1), box-shadow 260ms ease;
}

/* stroke is drawn by JS; fill animates on hover/keyboard activation */
.logo-svg path { fill-opacity: 0; transition: none; }
.logo-svg path[style] { stroke: var(--accent); }

/* When running, animate forward/back by toggling stroke-dashoffset in JS (no CSS keyframes needed) */
.logo-svg-wrap.running { transform: none }

.logo-preloader-caption { display: none }

/* exit animation: scale up and fade out to reveal page */
.logo-preloader.exiting { opacity: 0; transform: scale(1.04); transition: opacity 420ms ease, transform 420ms ease; pointer-events: none }
.logo-preloader { transition: opacity 420ms ease, transform 420ms ease }

.logo-preloader .logo-preloader-caption {
  color: color-mix(in srgb, white 88%, transparent 12%);
  font-size: 14px;
  opacity: 0.9;
}

@media (prefers-reduced-motion: reduce) {
  .logo-svg path { transition: none !important; stroke-dashoffset: 0 !important }
}

/* 404 NotFound Page: Ensure container is properly centered regardless of sidebar state */
.not-found-page {
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 !important;
  padding-left: 24px !important;
  padding-right: 24px !important;
  padding-bottom: 28px !important;
  padding-top: 0 !important;
  box-sizing: border-box;
  display: flex !important;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* When sidebar is expanded, add left margin to pull it back a bit */
.has-expanded-sidebar .not-found-page {
  margin-left: -170px !important;
}

/* Tablet breakpoint: reset margin for better centering */
@media (max-width: 1199px) {
  .not-found-page {
    margin-left: 0 !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  
  .has-expanded-sidebar .not-found-page {
    margin-left: 0 !important;
  }
}

/* Mobile breakpoint: ensure full centering on small screens */
@media (max-width: 640px) {
  .not-found-page {
    margin-left: 0 !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
}

/* Ensure text-center container centers properly within flex */
.not-found-page > .text-center {
  width: 100%;
  max-width: 100%;
}

/* Resume Page: Keep iframe width consistent - don't shrink when sidebar expands */
.has-expanded-sidebar .content-column [style*="height: 80vh"] {
  max-width: 1120px !important;
  width: 1120px !important;
}

/* Footer positioning: match the height of social icons on sidebar */
.footer-main {
  min-height: auto !important;
  display: flex;
  align-items: flex-end;
  padding-bottom: 24px !important;
}

