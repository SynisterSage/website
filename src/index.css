@import './fonts.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global root settings */
:root {
  scroll-behavior: smooth;
  /* navigation sizing */
  --nav-height: 64px; /* default nav height */
}

/* === Responsive header & spacing refinements === */

/* Mobile header: brand left, subtitle below, controls right */
@media (max-width: 1199px) {
  .mobile-nav .max-w-7xl {
    display: flex;
    align-items: center;
    justify-content: space-between !important;
    gap: 12px;
  }

  .mobile-nav .brand-stack {
    display: flex;
    flex-direction: column;
    gap: 2px;
    align-items: flex-start !important;
    text-align: left !important;
  }

  .mobile-nav .sidebar-subtitle {
    font-size: 14px;
    color: var(--muted);
    opacity: 0.95;
  }

  /* Make sure main content sits below the mobile nav cleanly */
  .main-content {
    padding-top: calc(var(--nav-height) + 12px) !important;
  }

  /* Reduce vertical gap under 'My Stack' heading */
  .content-column h4 {
    margin-bottom: 10px;
  }
}

/* Ensure mobile nav is visible and behaves like a header on small screens */
@media (max-width: 1199px) {
  .mobile-nav { display: flex !important; }
  .mobile-nav .max-w-7xl { width: 100%; }
  .mobile-nav .brand-stack a, .mobile-nav .brand-stack { width: auto; }
}

/* Footer alignment: ensure footer content lines up with header/content-column */
.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Keep dotted line consistent */
.dotted-line { border-top: 2px dotted var(--border); }

/* Slightly tighter spacing across sections for visual balance */
.content-column { gap: 0.5rem; }


  /* allow horizontal scrolling when necessary (user can optionally scroll left/right) */
  html, body, #root {
    overflow-x: auto;
  }

  /* Light theme */
  :root {
    --bg: #ffffff;
      --nav-bg: #ffffff; /* sidebar/nav should be light in light mode so text is visible */
    --mobile-nav-bg: #ffffff;
    --mobile-text: #111827;
    --text: #111827;
    --text-nav: #111827;
    --accent: #8878EE;
      --border: rgba(0,0,0,0.06);
    --muted: #6b7280;

    /* Glass tokens - light mode */
    --glass-bg: rgba(255, 255, 255, 0.28);
    --glass-bg-light: rgba(255, 255, 255, 0.18);
    --glass-bg-heavy: rgba(255, 255, 255, 0.50);
    --glass-border: rgba(255, 255, 255, 0.18);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    --glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.04);
  }

  /* Dark theme */
  :root.dark {
    --bg: #121217; /* actual dark background per user */
    --nav-bg: #121217;
    --mobile-nav-bg: #121217;
    --mobile-text: #ffffff;
    --text: #e5e7eb;
    --text-nav: #ffffff;
    --accent: #8878EE;
    --border: #2D2D3B;
    --muted: #9ca3af;

    /* Glass tokens - dark mode */
    --glass-bg: rgba(30, 30, 36, 0.72);
    --glass-bg-light: rgba(40, 40, 46, 0.60);
    --glass-bg-heavy: rgba(25, 25, 30, 0.85);
    --glass-border: rgba(255, 255, 255, 0.10);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    --glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.3);
  }

  body {
    background: linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 92%, var(--accent) 8%) 100%);
    background-attachment: fixed;
    color: var(--text);
  }

  #root {
    background-color: transparent;
  }

  /* helper components */
  .card-placeholder {
    background: linear-gradient(135deg, var(--accent) 0%, color-mix(in srgb, var(--accent) 60%, white) 100%);
  }

  /* nav item active indicator and hover animation */
  .sidebar-nav-item {
    position: relative;
    transform: translateZ(0);
  }

  .sidebar-nav-item:hover { transform: translateX(4px); }

  .sidebar-nav-item::before {
    content: '';
    position: absolute;
    left: -12px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    transition: width 150ms ease;
  }

  .sidebar-nav-item.active::before {
    width: 4px;
    height: 48%;
    background: var(--accent);
  }

  /* Collapsed sidebar styles */
  .sidebar-collapsed {
    width: 72px !important;
  }

  .sidebar-collapsed .nav-label,
  .sidebar-collapsed .sidebar-subtitle {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s;
  }

  .sidebar-collapsed .sidebar-nav-item {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.5rem 0.5rem;
    width: calc(100% - 1rem);
    margin: 0.25rem auto;
    box-sizing: border-box;
  }

  .sidebar-collapsed .sidebar-nav-item span:first-child {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin: 0;
  }

  .sidebar-collapsed .nav-label {
    display: none;
  }

  /* Hover should be subtle (no pill) in collapsed mode; active keeps a thicker pill */
  /* In collapsed mode: keep hover animation (slide slightly) but no pill; active shows a small dot below the icon */
  .sidebar-collapsed .sidebar-nav-item:hover {
    background: rgba(255,255,255,0.02) !important;
    transform: translateX(6px) !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }

  /* Remove pill for active; add a small dot under active icon to indicate selection */
  .sidebar-collapsed .sidebar-nav-item.active {
    background: transparent !important;
    transform: none !important;
  }

  .sidebar-collapsed .sidebar-nav-item.active::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: 1px; /* nudged down ~3px */
    width: 6px;
    height: 6px;
    background: rgba(255,255,255,0.95);
    border-radius: 999px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.18);
  }

  .sidebar-collapsed .sidebar-nav-item::before {
    display: none;
  }

  .sidebar-collapsed .social-icons {
    justify-content: center;
    padding-top: 0.5rem;
  }

  .sidebar-collapsed .social-separator {
    margin: 0 0.5rem;
    opacity: 0.2;
  }

  /* Main content transition */
  .main-content {
    transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: margin-left;
  }

  /* Animate width transition */
  .sidebar {
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: width;
  }

  .dotted-line {
    border-top: 2px dotted var(--border);
  }

  /* tighter default spacing helpers */
  :root {
    --site-gap: 1rem; /* general smaller gap */
    --card-padding: 0.75rem;
  }

  

  .available-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: #0f2f1f;
    color: #c6f6d5;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 13px;
  }

  /* per-card outline appearance (simplified) */

  /* project badge updated to use glass styling (softer, semi-transparent) */
  .project-badge {
    background: rgba(0,0,0,0.5); /* semi-transparent dark tint */
    color: #fff;
    border-radius: 8px;
    padding: 8px 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.22);
    border: 1px solid rgba(255,255,255,0.04);
    flex-wrap: nowrap;
    white-space: nowrap;
    overflow: hidden;
  }

  .project-badge > div {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  @supports (backdrop-filter: blur(4px)) or (-webkit-backdrop-filter: blur(4px)) {
    .project-badge {
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(6px) saturate(120%);
      -webkit-backdrop-filter: blur(6px) saturate(120%);
    }
  }

  .card-placeholder {
    border-radius: 8px;
    background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 70%, white 30%) 0%, color-mix(in srgb, var(--accent) 40%, #000 60%) 100%);
    aspect-ratio: 4 / 3;
    background-size: cover;
  }

  /* unified project card surface */
  .project-card {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0,0,0,0.18);
    border: none; /* no per-card border */
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  }

  /* stack icon - soft inset tile */
  .stack-icon {
    border-radius: 8px;
    padding: 8px;
    width: 56px;
    height: 56px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: transparent; /* icon sits on the card surface */
    border: none;
    box-shadow: none;
  }

  /* ===================================
     BUTTON DESIGN SYSTEM
     =================================== */
  
  /* Primary Button - Main call-to-action */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    background: var(--accent);
    color: white;
    font-weight: 500;
    border: none;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-primary:hover {
    background: color-mix(in srgb, var(--accent) 85%, white);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(136, 120, 238, 0.3);
  }

  .btn-primary:active {
    transform: translateY(0);
  }

  /* Secondary Button - Outline style */
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    border: 2px solid var(--border);
    color: var(--text);
    background: transparent;
    font-weight: 500;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-secondary:hover {
    border-color: var(--accent);
    color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(136, 120, 238, 0.15);
  }

  .btn-secondary:active {
    transform: translateY(0);
  }

  /* Tertiary Button - Dotted outline style */
  .btn-tertiary {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.625rem 1.25rem;
    border-radius: 0.5rem;
    border: 2px dotted var(--border);
    color: var(--text);
    background: transparent;
    font-weight: 500;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-tertiary:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: color-mix(in srgb, var(--accent) 5%, transparent);
    transform: translateY(-1px);
  }

  .btn-tertiary:active {
    transform: translateY(0);
  }

  /* Old button class for backwards compatibility - map to secondary */
  .btn-outline-accent {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    border: 2px solid var(--border);
    color: var(--text);
    background: transparent;
    font-weight: 500;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .btn-outline-accent:hover {
    border-color: var(--accent);
    color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(136, 120, 238, 0.15);
  }

  .project-card-hover {
    transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
    will-change: transform;
    position: relative;
    overflow: visible; /* allow shadows to show outside the card */
  }

  .project-card-hover:hover .project-card {
    transform: translateY(-2px) scale(1.005);
    box-shadow: 0 18px 46px rgba(0,0,0,0.18);
    z-index: 50; /* bring hovered card above its siblings */
  }

/* Light mode: soften hover shadows so they aren't harsh on white backgrounds */
:root:not(.dark) .project-card-hover:hover .project-card {
  box-shadow: 0 12px 30px rgba(0,0,0,0.06);
}

  /* single frame border around the projects grid */
  .projects-frame {
    padding: 0;
    border: none;
    box-shadow: none;
    background: transparent;
    max-width: 100%;
    box-sizing: border-box;
  }

  .stack-item {
    transition: transform 180ms ease, box-shadow 180ms ease;
    border: 2px dotted var(--border);
  }

  .stack-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  }

  @media (min-width: 768px) {
    /* remove global body padding; main layout uses md:ml-72 instead */
  }

  /* Desktop-specific tweaks for 1200px Framer frame */
  @media (min-width: 1200px) {
    .projects-frame {
      max-width: 1120px; /* leave some breathing room for sidebar */
      padding: 10px;
    }

    .projects-frame .grid {
      gap: 12px;
    }

    .card-placeholder {
      aspect-ratio: 5 / 4; /* slightly squarer so more fits vertically */
    }

    /* ensure expanded sidebar uses the intended width defined by component classes */
    .sidebar:not(.sidebar-collapsed) {
      width: var(--sidebar-width, 18rem);
    }

    /* show sidebar only at >=1200px; hide below this so tablet uses mobile nav */
    /* default: hide sidebar for smaller viewports (mobile/tablet) */
    .sidebar {
      display: none;
    }

    /* At desktop sizes show the sidebar and shift main content by the sidebar width */
    .sidebar {
      display: flex !important;
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      flex-direction: column;
      justify-content: space-between;
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
      padding-left: 1rem;
      padding-right: 1rem;
      z-index: 40;
      width: var(--sidebar-width, 18rem);
    }

    .main-content {
      /* reserve space for the fixed sidebar using padding so inner content can be centered */
      margin-left: 0;
      padding-left: var(--sidebar-width, 18rem);
      padding-right: 24px;
      box-sizing: border-box;
      display: flex;
      justify-content: flex-start;
      transition: padding-left 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* On very wide screens center the content column inside the remaining area so the right side doesn't look empty */
    @media (min-width: 1600px) {
      .main-content {
        justify-content: center;
        padding-right: 0;
      }
    }
  }

  /* Content column that reacts to sidebar width variable */
  .content-column {
    /* subtract the sidebar width (fallback to 288px) and a comfortable gutter */
    /* allow the content to expand more on very wide screens but keep a comfortable gutter */
    max-width: min(1600px, calc(100vw - var(--sidebar-width, 288px) - 48px));
    box-sizing: border-box;
  }

  /* smaller break for tighter spaces: reduce gaps if the available width is narrow */
  @media (max-width: 1280px) {
    .projects-frame .grid {
      gap: 10px;
    }
    .stack-grid {
      gap: 10px;
    }
  }

  /* Responsive projects grid that keeps content centered and prevents clipping */
  .projects-frame {
    padding: 0;
    width: 100%;
    box-sizing: border-box;
    background: transparent;
  }

  /* Default grid: fluid, wrap when needed, maintain minimum card width to avoid clipping */
  .projects-frame .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 24px;
    align-items: start;
    justify-content: start;
  }

  .projects-frame .card-placeholder {
    aspect-ratio: 4 / 3;
    border-radius: 12px;
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  /* Desktop: ensure three columns as long as the viewport allows it */
  @media (min-width: 1200px) {
    .content-column { max-width: 1900px; }
    .main-content { padding-left: calc(var(--sidebar-width, 18rem) + 24px); padding-right: 24px; }
    .projects-frame .grid { grid-template-columns: repeat(3, minmax(500px, 1fr)); gap: 44px; }
    .projects-frame .card-placeholder { aspect-ratio: 5 / 4; }
    
    /* Ensure stack grid has proper spacing */
    .stack-grid { gap: 1rem 1rem; }
  }

  /* Tablet: slightly taller portrait cards and auto-fit columns */
  @media (min-width: 810px) and (max-width: 1199px) {
    .content-column { max-width: 100%; padding-left: 2rem; padding-right: 2rem; }
    /* Force two columns on tablet with slightly smaller min width for smoother downscaling */
    .projects-frame .grid { grid-template-columns: repeat(2, minmax(320px, 1fr)); gap: 28px; }
    /* Use portrait aspect ratio for tablet cards with a slightly lower max-height for consistency */
    .projects-frame .card-placeholder { width: 100%; aspect-ratio: 5 / 4; max-height: 480px; object-fit: cover; }
    
    /* Stack grid spacing for tablet */
    .stack-grid { gap: 1rem 0.75rem; }
  }

  /* Phone: single column, cap width so visuals remain consistent */
  @media (max-width: 809px) {
    .content-column { padding-left: 1rem; padding-right: 1rem; max-width: 100%; }
    .projects-frame .grid { grid-template-columns: 1fr; gap: 20px; }
    .projects-frame .card-placeholder { width: 100%; aspect-ratio: 5 / 4; max-height: 420px; }
    
    /* Stack grid for mobile - 2 columns */
    .stack-grid { gap: 0.75rem; grid-template-columns: repeat(2, 1fr); }
  }
 
  /* Sidebar header fixed height to keep collapsed/expanded alignment consistent */
  .sidebar-header {
    height: 56px; /* matches the visual header height */
    display: flex;
    align-items: center;
  }

  /* Glass UI utility classes */
  .glass {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
  }

  @supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
    .glass {
      backdrop-filter: blur(12px) saturate(140%);
      -webkit-backdrop-filter: blur(12px) saturate(140%);
    }
    
    .glass-light {
      background: var(--glass-bg-light);
      backdrop-filter: blur(10px) saturate(130%);
      -webkit-backdrop-filter: blur(10px) saturate(130%);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow-sm);
    }
    
    .glass-heavy {
      background: var(--glass-bg-heavy);
      backdrop-filter: blur(16px) saturate(150%);
      -webkit-backdrop-filter: blur(16px) saturate(150%);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
    }
  }

  /* Accessibility: reduced transparency */
  @media (prefers-reduced-transparency: reduce) {
    .glass,
    .glass-light,
    .glass-heavy {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      background: var(--nav-bg) !important;
      border: 1px solid var(--border) !important;
    }
  }

  /* Mobile nav styling - similar to desktop sidebar */
  .mobile-nav {
    display: none;
    top: 0;
    left: 0;
    right: 0;
    position: fixed;
    z-index: 1200;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    align-items: center;
    height: var(--nav-height);
    backdrop-filter: blur(12px) saturate(140%);
    background: var(--glass-bg);
    border-bottom: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow-sm);
  }

  .mobile-menu {
    position: fixed;
    top: var(--nav-height);
    left: 0;
    right: 0;
    /* opaque panel so content underneath doesn't visually bleed through */
    bottom: 0;
    height: calc(100vh - var(--nav-height));
    background: color-mix(in srgb, var(--nav-bg) 92%, rgba(255,255,255,0.02) 8%);
    padding: 1.25rem 1rem;
    display: none;
    border-bottom: none;
    box-shadow: 0 18px 48px rgba(0,0,0,0.18);
    z-index: 1200;
  }

  /* Light mode: add subtle border at top for definition */
  :root:not(.dark) .mobile-menu {
    background: color-mix(in srgb, var(--nav-bg) 96%, rgba(0,0,0,0.01) 4%);
    border-top: 1px solid rgba(0,0,0,0.06);
    box-shadow: 0 -2px 12px rgba(0,0,0,0.04), 0 8px 24px rgba(0,0,0,0.06);
  }

  .mobile-menu.open {
    display: block;
  }
  
  .mobile-menu-inner {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    width: 100%;
    max-width: none;
    margin: 0;
  }
  
  .mobile-menu-link {
    padding: 0.9rem 1rem;
    font-weight: 500;
    transition: all 160ms ease;
    text-align: left;
    width: 100%;
    display: flex;
    align-items: center;
    gap: 12px;
    border-left: 4px solid transparent;
    background: transparent; /* no filled boxes for inactive items */
    color: var(--text);
    border-radius: 8px;
  }
  
  .mobile-menu-link:hover {
    background: color-mix(in srgb, var(--accent) 6%, transparent);
    transform: translateX(6px);
  }

  .mobile-menu-link.active {
    border-left-color: var(--accent);
    color: var(--accent);
    font-weight: 600;
  }

  /* Light mode: add subtle borders and refined backgrounds to menu items */
  :root:not(.dark) .mobile-menu-link {
    background: rgba(255,255,255,0.4);
    border: 1px solid rgba(0,0,0,0.06);
    border-left: 4px solid transparent;
    box-shadow: 0 1px 3px rgba(0,0,0,0.02);
  }

  :root:not(.dark) .mobile-menu-link:hover {
    background: rgba(136, 120, 238, 0.08);
    border-color: rgba(136, 120, 238, 0.15);
    box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  }

  :root:not(.dark) .mobile-menu-link.active {
    background: rgba(136, 120, 238, 0.12);
    border-left-color: var(--accent);
    border-top-color: rgba(0,0,0,0.06);
    border-right-color: rgba(0,0,0,0.06);
    border-bottom-color: rgba(0,0,0,0.06);
    box-shadow: 0 2px 8px rgba(136, 120, 238, 0.12);
  }

  /* Tablet & small-laptop: show mobile menu as left-aligned list (not centered) */
  @media (min-width: 600px) and (max-width: 1199px) {
    .mobile-menu-inner {
      max-width: none;
      margin: 0;
      padding-left: 1.5rem; /* align with page content */
      padding-right: 1.5rem;
    }

    .mobile-menu-link {
      width: auto;
      text-align: left;
      border-radius: 0.5rem;
    }
  }

  @media (min-width: 1200px) {
    /* Respect the sidebar width variable so the centered content sits in the remaining area
       to the right of the fixed sidebar. This keeps the visual center correct for both
       collapsed and expanded states without visually clipping to the right. */
    .main-content {
      /* Reserve space for the sidebar and center the inner content using flexbox */
      margin-left: var(--sidebar-width, 18rem);
      padding-left: 0;
      padding-right: 0;
      box-sizing: border-box;
      z-index: 10; /* ensure sidebar (z-index:40) sits above main */
      display: flex;
      justify-content: center;
      width: calc(100vw - var(--sidebar-width, 18rem));
    }

    /* Centered column that is bounded by available space so it never overflows. */
    .content-column {
      margin-left: auto;
      margin-right: auto;
      padding-left: 24px;
      padding-right: 24px;
      max-width: 1900px;
      width: 100%;
      box-sizing: border-box;
      min-width: 0;
    }

    /* Desktop grid: enforce three flexible columns (min 500px). This keeps 3-up at 1920x1080
       while allowing the cards to shrink if space is tight to avoid overflow. */
    .projects-frame .grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(500px, 1fr));
      gap: 44px;
      justify-items: stretch;
      justify-content: start;
    }

    /* allow grid children to shrink and not cause overflow */
    .projects-frame .grid > * {
      min-width: 0;
    }

    /* (expanded-sidebar narrowing moved to tablet scope below) */

    /* When the sidebar is collapsed allow a wider max-width but still bounded by viewport. */
    .has-collapsed-sidebar .content-column {
      max-width: min(1240px, calc(100vw - var(--sidebar-width, 18rem) - 48px));
    }

    /* When the sidebar is collapsed, keep a 3-column projects layout and scale cards
       so they stay on a single row of three rather than expanding into extra whitespace. */
    .has-collapsed-sidebar .projects-frame .grid {
      /* keep 3 columns and allow them to shrink smoothly, but prevent items from forcing overflow */
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 28px;
    }

    /* allow grid children to shrink and not cause overflow */
    .projects-frame .grid > * {
      min-width: 0;
    }

    /* Desktop: use flexible card sizing within the 1400px content-column */
    @media (min-width: 1200px) {
      .projects-frame {
        overflow: visible;
        box-sizing: border-box;
        max-width: 100%; /* allow the frame to expand with content-column */
        margin-left: auto;
        margin-right: auto;
      }

      .projects-frame .grid {
        display: grid;
        grid-auto-rows: auto;
        grid-template-columns: repeat(3, minmax(310px, 1fr));
        justify-content: center;
        gap: 28px;
      }

      .projects-frame .card-placeholder {
        width: 100%;
        aspect-ratio: 5 / 4; /* maintain aspect ratio */
        border-radius: 12px;
      }
    }

   /* keep desktop (>=1200px) showing 3 fixed columns; expanded-sidebar rules for
     narrower viewport ranges are applied in the tablet media block below. */

    /* Prevent projects grid items from overflowing when sidebar collapses */
    .projects-frame .grid > * {
      min-width: 0; /* allows flex/grid items to shrink properly */
    }
  }

  /* Small screens: make sure the content has comfortable side padding */
  @media (max-width: 1199px) {
    .content-column {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
      max-width: 100%;
    }
    .main-content {
      padding-left: 0;
      padding-right: 0;
    }
    
    /* Adjust hero text sizing for mobile */
    h1 {
      font-size: 2.5rem;
    }
  }
  
  /* Mobile-specific adjustments */
  @media (max-width: 809px) {
    .content-column {
      padding-left: 1rem;
      padding-right: 1rem;
    }
    
    h1 {
      font-size: 2rem;
    }
  }

  /* Ensure mobile nav and sidebar behavior is explicit for tablet/phone sizes */
  @media (max-width: 1199px) {
    /* show mobile nav (top bar) and keep it above everything */
    .mobile-nav {
      display: flex !important;
      position: fixed !important;
      left: 0;
      right: 0;
      top: 0;
      z-index: 1200 !important;
      align-items: center;
      height: var(--nav-height);
      padding-left: 1rem;
      padding-right: 1rem;
    }

    /* mobile menu behavior */
    .mobile-menu {
      display: none;
    }

    .mobile-menu.open {
      display: block;
    }

    /* hide the desktop sidebar completely on smaller screens */
    .sidebar {
      display: none !important;
    }

    /* ensure main content sits below the mobile nav */
    .main-content {
      padding-top: calc(var(--nav-height) + 8px) !important;
      margin-left: 0 !important;
    }
  }
